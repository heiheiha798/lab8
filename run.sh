#!/bin/bash

set -e

make clean

echo "----------------------------------------"
echo "步骤 1: 正在生成输入文件 (input_mem.csv)..."
echo "----------------------------------------"
make generate_input

echo ""
echo "----------------------------------------"
echo "步骤 2: 正在编译并运行仿真..."
echo "----------------------------------------"
# 'make run' 任务会先执行编译，然后运行仿真程序
make run

echo ""
echo "----------------------------------------"
echo "步骤 3: 正在检查仿真结果..."
echo "----------------------------------------"
make check_result

echo ""
echo "----------------------------------------"
echo "所有步骤成功完成！"
echo "----------------------------------------"